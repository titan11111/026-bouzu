<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>åƒ§ä¾¶ã®ç›¸è«‡ã‚²ãƒ¼ãƒ  - æ‚Ÿã‚Šã®é“ -</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho&family=Yuji+Syuku&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* --- å¤‰æ•°å®šç¾© --- */
        :root {
            --font-title: 'Yuji Syuku', serif;
            --font-body: 'Shippori Mincho', serif;
            --bg-color: #f0f0e0;
            --text-color: #3d3b38;
            --accent-color: #8e354a;
            --success-color: #5b7e91;
            --shadow-color: rgba(61, 59, 56, 0.3);
            --safe-area-bottom: env(safe-area-inset-bottom, 20px);
        }

        * {
            box-sizing: border-box;
            /* iOSã§ã®ã‚¿ãƒƒãƒ—ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ç„¡åŠ¹åŒ– */
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-body);
            color: var(--text-color);
            min-height: 100vh;
            /* ã‚¹ãƒãƒ›ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼å¯¾ç­– */
            min-height: 100dvh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
            /* iOSç”¨èƒŒæ™¯å›ºå®šãƒãƒƒã‚¯ã®è¦ªè¦ç´  */
            position: relative;
            overflow-x: hidden;
        }

        /* iOSã§èƒŒæ™¯fixedãŒåŠ¹ã‹ãªã„å•é¡Œã¸ã®å¯¾ç­– */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: var(--bg-color);
            background-image: url('haikeibutu.png'); 
            background-size: cover;
            background-position: center;
            z-index: -1;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.94);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            border: 4px double var(--text-color);
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
            /* å°‘ã—é«˜ã•ã‚’ç¢ºä¿ */
            align-items: start;
        }

        header {
            grid-column: 1 / -1;
            text-align: center;
            border-bottom: 2px solid var(--text-color);
            margin-bottom: 10px;
            padding-bottom: 15px;
            position: relative;
        }

        header h1 {
            font-family: var(--font-title);
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            margin: 0;
            color: var(--accent-color);
            text-shadow: 2px 2px 0px rgba(255,255,255,0.8);
            line-height: 1.2;
        }

        header p {
            margin: 5px 0 0;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* éŸ³é‡ãƒœã‚¿ãƒ³ */
        .sound-control {
            position: absolute;
            top: 0;
            right: 0;
            background: #fff;
            border: 2px solid var(--text-color);
            border-radius: 50%;
            width: 44px; /* ã‚¿ãƒƒãƒ—ã—ã‚„ã™ã„ã‚µã‚¤ã‚º */
            height: 44px;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s, background 0.2s;
            z-index: 10;
        }
        .sound-control:active {
            transform: scale(0.9);
            background: var(--bg-color);
        }

        .game-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* å’Œå°šç”»åƒã®ä¿®æ­£ */
        .monk-container {
            text-align: center;
            margin-bottom: 10px;
        }
        
        .monk-img {
            display: inline-block;
            width: 140px;
            max-width: 40%; /* ã‚¹ãƒãƒ›ã§å¤§ãããªã‚Šã™ããªã„ã‚ˆã†ã« */
            height: auto;
            border-radius: 50%;
            border: 4px solid var(--accent-color);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            background: #fff;
            object-fit: cover;
        }

        /* ç›¸è«‡ã‚«ãƒ¼ãƒ‰ */
        .consultation-card {
            background: #fff;
            border: 2px solid var(--text-color);
            border-radius: 8px;
            padding: 20px;
            position: relative;
            margin-top: 10px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.05);
        }
        
        .consultation-card::after {
            content: "å•";
            position: absolute;
            top: -14px;
            left: 15px;
            background: var(--text-color);
            color: #fff;
            padding: 2px 12px;
            border-radius: 12px;
            font-family: var(--font-title);
            font-size: 1rem;
            font-weight: bold;
        }

        .visitor-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px dashed #ccc;
            margin-bottom: 12px;
            padding-bottom: 8px;
        }

        .visitor-name {
            font-weight: bold;
            font-size: 1.1em;
            color: var(--accent-color);
        }

        .count-display {
            font-size: 0.9em;
            color: #666;
            font-family: var(--font-title);
            background: #eee;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .consultation-text {
            font-size: 1.1em;
            line-height: 1.8;
            min-height: 3em; /* ã‚¬ã‚¿ã¤ãé˜²æ­¢ */
        }

        /* --- ãƒœã‚¿ãƒ³æ‰“æ„Ÿã®å¼·åŒ– --- */
        .advice-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .advice-btn, .next-btn, .start-btn {
            font-family: var(--font-body);
            background: #fff;
            color: var(--text-color);
            border: 2px solid var(--text-color);
            border-radius: 8px;
            padding: 16px 20px 16px 45px; /* å·¦ã¯ã‚¢ã‚¤ã‚³ãƒ³åˆ†ç©ºã‘ã‚‹ */
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            text-align: left;
            user-select: none; /* ãƒ†ã‚­ã‚¹ãƒˆé¸æŠé˜²æ­¢ */
            touch-action: manipulation; /* ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚ºãƒ¼ãƒ é˜²æ­¢ */
            
            /* ç«‹ä½“æ„Ÿã®æ¼”å‡º */
            box-shadow: 0 4px 0 var(--text-color); 
            transform: translateY(0);
            transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.1s;
        }

        .advice-btn::before {
            content: "â—†";
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-color);
            font-size: 0.8em;
            transition: color 0.2s;
        }

        /* æŠ¼ã—ãŸæ™‚ã®æŒ™å‹• (Active) */
        .advice-btn:active, .next-btn:active, .start-btn:active {
            transform: translateY(4px); /* æ²ˆã¿è¾¼ã‚€ */
            box-shadow: 0 0 0 var(--text-color); /* å½±ã‚’æ¶ˆã™ */
            background-color: #fdfdf0;
        }

        /* PCã®ã¿ãƒ›ãƒãƒ¼åŠ¹æœ */
        @media (hover: hover) {
            .advice-btn:hover {
                background: #fff8f8;
            }
            .advice-btn:hover::before {
                color: var(--text-color);
            }
        }

        /* çµæœè¡¨ç¤º */
        .result {
            padding: 20px;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            background: #fff0f0;
            display: block;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-top: 10px;
        }
        
        @keyframes popIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .result.hidden {
            display: none !important;
        }
        
        .result.success {
            border-color: var(--success-color);
            background: #f0f8ff;
        }

        .result-text {
            font-family: var(--font-title);
            font-size: 1.4em;
            margin-bottom: 10px;
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .result.success .result-text {
            color: var(--success-color);
        }

        /* æ¬¡ã¸ãƒœã‚¿ãƒ³ */
        .next-btn {
            margin-top: 20px;
            text-align: center;
            background: var(--text-color);
            color: #fff;
            padding: 15px;
            width: 100%;
            box-shadow: 0 4px 0 #1a1918; /* å°‘ã—æ¿ƒã„å½± */
        }
        .next-btn:active {
            box-shadow: 0 0 0 #1a1918;
            background: #555;
        }

        /* ãƒãƒ£ãƒ¼ãƒˆã‚¨ãƒªã‚¢ */
        .chart-container {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: fit-content;
        }
        
        .chart-title {
            font-family: var(--font-title);
            font-size: 1.1em;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            width: 100%;
            text-align: center;
            padding-bottom: 5px;
        }

        /* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ */
        #start-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        .start-content {
            background: #fff;
            padding: 40px 30px;
            text-align: center;
            border-radius: 12px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 4px double var(--accent-color);
        }
        .start-btn {
            background: var(--accent-color);
            color: #fff;
            border-color: #6d2939;
            box-shadow: 0 4px 0 #6d2939;
            width: 100%;
            text-align: center;
            padding: 15px;
            margin-top: 20px;
        }
        .start-btn:active {
            box-shadow: 0 0 0 #6d2939;
            background: #7a2d40;
        }

        /* --- ã‚¹ãƒãƒ›å‘ã‘ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­å®š --- */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                /* ä¸Šéƒ¨ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼åˆ†ã‚’è€ƒæ…® */
                padding-top: max(10px, env(safe-area-inset-top)); 
                padding-bottom: var(--safe-area-bottom);
                align-items: flex-start; /* ç¸¦é•·ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¯¾å¿œ */
            }

            .container {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px 15px;
                margin-bottom: var(--safe-area-bottom);
            }

            header h1 {
                font-size: 1.8em;
            }

            .sound-control {
                width: 36px;
                height: 36px;
                font-size: 1em;
                top: -10px;
                right: -5px;
            }

            /* ã‚¹ãƒãƒ›ã§ã¯å’Œå°šã‚’å°‘ã—å°ã•ã */
            .monk-img {
                width: 120px;
            }

            /* ãƒãƒ£ãƒ¼ãƒˆã‚’ä¸‹ã«é…ç½®ã™ã‚‹éš›ã®ãƒãƒ¼ã‚¸ãƒ³ */
            .chart-container {
                margin-top: 10px;
            }

            .advice-btn {
                padding: 14px 15px 14px 35px; /* ã‚¹ãƒãƒ›ç”¨ã«ä½™ç™½èª¿æ•´ */
                font-size: 0.95em;
            }
        }
    </style>
</head>
<body>
    <audio id="bgm" loop>
        <source src="audio/Whispers of the Stillness.mp3" type="audio/mpeg">
    </audio>

    <div id="start-overlay">
        <div class="start-content">
            <h1 style="font-family: var(--font-title); margin-bottom: 20px; color: var(--accent-color);">åƒ§ä¾¶ã®ç›¸è«‡éƒ¨å±‹</h1>
            <p style="line-height: 1.8;">å¿ƒã‚’è½ã¡ç€ã‘ã€<br>è¿·ãˆã‚‹è€…ãŸã¡ã‚’å°ãã®ã§ã™ã€‚<br>ï¼ˆå…¨10å•ã®ä¿®è¡Œã¨ãªã‚Šã¾ã™ï¼‰</p>
            <button class="start-btn" onclick="startGame()">ä¿®è¡Œé–‹å§‹</button>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>ğŸ™ åƒ§ä¾¶ã®ç›¸è«‡éƒ¨å±‹ ğŸ™</h1>
            <p>å·±ã‚’è¦‹ã¤ã‚ã¦ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ç£¨ãã®ã§ã™</p>
            <button class="sound-control" onclick="toggleSound()" aria-label="éŸ³æ¥½ON/OFF">â™ª</button>
        </header>

        <div class="game-area">
            <div class="monk-container">
                <img src="images/osyou.png" alt="å’Œå°š" class="monk-img">
            </div>

            <div id="consultation-card" class="consultation-card">
                <div class="visitor-info">
                    <span class="visitor-name" id="visitor-name">ç›¸è«‡è€…</span>
                    <span class="count-display" id="count-display">1 / 10</span>
                </div>
                <div class="consultation-text" id="consultation-text">
                    ã“ã“ã«æ‚©ã¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
                </div>
            </div>

            <div id="advice-buttons" class="advice-buttons">
                </div>

            <div id="result" class="result hidden">
                <div class="result-text" id="result-text"></div>
                <div class="result-message" id="result-message" style="line-height:1.6; margin-bottom:10px;"></div>
                <button class="next-btn" onclick="nextConsultation()">æ¬¡ã¸é€²ã‚€</button>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">ç¾åœ¨ã®é­‚ã®çŠ¶æ…‹</div>
            <div style="position: relative; width: 100%; max-width: 300px;">
                <canvas id="soulChart"></canvas>
            </div>
            <div style="margin-top: 15px; font-size: 0.85em; text-align: center; color: #666;">
                <p style="margin:2px 0;">â€» ä¸ŠãŒå¾³ã€ä¸‹ãŒæ¥­</p>
                <p style="margin:2px 0;">æ­£ã—ãé“ã¯ä¸‰è§’å½¢ã‚’ä¸Šã¸å°ã</p>
            </div>
        </div>
    </div>

    <script>
        // --- ç›¸è«‡ãƒ‡ãƒ¼ã‚¿ï¼ˆ60äººåˆ†ï¼‰ ---
        const consultations = [
            { name: "ç”°ä¸­æ®¿ï¼ˆä¼šç¤¾å“¡ï¼‰", problem: "ä»•äº‹ã®é‡åœ§ã«è€ãˆé›£ãã€æ¯æ—¥ãŒè¾›ã†ã”ã–ã„ã¾ã™ã€‚", advice: ["ç„¡äººå³¶ã¸é€ƒã’ãªã•ã‚Œ", "æ·±å‘¼å¸ã—ã€ä»Šã‚’è¦‹ã¤ã‚ãªã•ã‚Œ", "ä¸Šå¸ã«èª¬æ³•ãªã•ã‚Œ"], correct: 1, message: "ã€Œå¿ƒãŒè»½ããªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œç„¡äººå³¶â€¦ï¼Ÿ Wi-Fiã¯ã‚ã‚‹ã®ã§ã™ã‹ï¼Ÿã€" },
            { name: "çŒ«åˆï¼ˆé‡è‰¯çŒ«ï¼‰", problem: "ç¸„å¼µã‚Šã‚’å·¡ã‚Šã€ä»–ã®çŒ«ã¨äº‰ã„ãŒçµ¶ãˆã¬ã€‚", advice: ["å…±å­˜ã®é“ã‚’æ¢ã™ãŒã‚ˆã„", "åŠ›ã§è¿½ã„å‡ºã—ãªã•ã‚Œ", "å…±ã«å–§å˜©ãªã•ã‚Œ"], correct: 0, message: "ã€Œå¹³å’Œã®é“ã‚’æ¢ã—ã¦ã¿ã‚‹ãƒ‹ãƒ£ã€", failMessage: "ã€Œãã‚Œã§ã¯è§£æ±ºã«ãªã‚‰ã¬ãƒ‹ãƒ£â€¦ã€" },
            { name: "é­”ç‹ï¼ˆè»¢è·æ´»å‹•ä¸­ï¼‰", problem: "ä¸–ç•Œå¾æœã«é£½ããŸãŒã€ä»–ã«ã‚„ã‚ŠãŸã„ã“ã¨ãŒãªã„ã€‚", advice: ["ä¸–ç•Œã‚’ç ´å£Šã—ãªã•ã‚Œ", "å°ã•ãªè¦ªåˆ‡ã‹ã‚‰å§‹ã‚ãªã•ã‚Œ", "éƒ¨ä¸‹ã‚’ã„ã˜ã‚ãªã•ã‚Œ"], correct: 1, message: "ã€Œè¦ªåˆ‡â€¦ï¼Ÿ æ–°é®®ãªéŸ¿ãã ã€", failMessage: "ã€Œç ´å£Šã¯ã‚‚ã†é£½ããŸã¨è¨€ã†ã¦ãŠã‚ã†ï¼ã€" },
            { name: "ä¸»å©¦Aï¼ˆç¯€ç´„å®¶ï¼‰", problem: "ã‚¹ãƒ¼ãƒ‘ãƒ¼ã®åŠé¡ã‚·ãƒ¼ãƒ«ã‚’è¦‹ã‚‹ã¨ã€ä¸è¦ãªã‚‚ã®ã¾ã§è²·ã£ã¦ã—ã¾ã†ã®ã§ã™ã€‚", advice: ["ã‚·ãƒ¼ãƒ«ã‚’å¿ƒã®ç›®ã§è¦‹ãªã•ã‚Œ", "å…¨éƒ¨è²·ã„å ã‚ãªã•ã‚Œ", "åº—å“¡ã¨æˆ¦ã„ãªã•ã‚Œ"], correct: 0, message: "ã€Œå¿…è¦ãªã‚‚ã®ã ã‘ãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œå†·è”µåº«ãŒãƒ‘ãƒ³ãƒ‘ãƒ³ã§å…¥ã‚‰ãªã„ã‚ï¼ã€" },
            { name: "ãƒ¦ãƒ¼ãƒãƒ¥ãƒ¼ãƒãƒ¼", problem: "å†ç”Ÿæ•°ãŒä¼¸ã³æ‚©ã¿ã€ç‚ä¸Šå•†æ³•ã«æ‰‹ã‚’å‡ºãã†ã‹è¿·ã£ã¦ã„ã¾ã™ã€‚", advice: ["ç‚ä¸Šã¯èº«ã‚’æ»…ã¼ã™ã®ã¿", "ã•ã‚‰ã«éæ¿€ã«ã‚„ã‚Šãªã•ã‚Œ", "ã‚«ãƒ¡ãƒ©ã‚’æ¨ã¦ãªã•ã‚Œ"], correct: 0, message: "ã€Œåœ°é“ã«è‰¯ã„å‹•ç”»ã‚’ä½œã‚Šã¾ã™ã€", failMessage: "ã€Œã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒBANã•ã‚Œã¾ã—ãŸâ€¦ã€" },
            { name: "é£Ÿãƒ‘ãƒ³ï¼ˆ6æšåˆ‡ã‚Šï¼‰", problem: "ã„ã¤ã‹ãƒˆãƒ¼ã‚¹ã‚¿ãƒ¼ã§ç„¼ã‹ã‚Œã‚‹ã®ãŒæ€–ã„ã®ã§ã™ã€‚", advice: ["ã‚¸ãƒ£ãƒ ã‚’å¡—ã‚ŠãŸãã‚Šãªã•ã‚Œ", "ç„¼ã‹ã‚Œã‚‹é‹å‘½ã‚’å—ã‘å…¥ã‚Œãªã•ã‚Œ", "ã‚«ãƒ“ã‚’ç”Ÿã‚„ã—ãªã•ã‚Œ"], correct: 1, message: "ã€Œé¦™ã°ã—ã„æ¥ä¸–ã‚’å¤¢è¦‹ã¾ã™ã€", failMessage: "ã€Œã‚«ãƒ“ã¯å«Œã ï¼ æ¨ã¦ã‚‰ã‚Œã‚‹ï¼ã€" },
            { name: "ä¿¡å·æ©Ÿï¼ˆèµ¤ï¼‰", problem: "ã¿ã‚“ãªç§ã‚’è¦‹ã‚‹ã¨æ­¢ã¾ã£ã¦ã—ã¾ã†ã€‚å«Œã‚ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚", advice: ["å®‰å…¨ã‚’å®ˆã‚‹æ„›ã®å½¢ã§ã™", "é’ã«ãªã‚Šç¶šã‘ãªã•ã‚Œ", "ç‚¹æ»…ã—ã¦ç…½ã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œç§ã¯æ„›ã•ã‚Œã¦ã„ãŸã®ã§ã™ã­ã€", failMessage: "ã€Œäº‹æ•…ãŒå¤šç™ºã—ã¦å¤§å¤‰ãªã“ã¨ã«ï¼ã€" },
            { name: "å³è¶³ã®å°æŒ‡", problem: "ã‚¿ãƒ³ã‚¹ã®è§’ãŒç§ã°ã‹ã‚Šç‹™ã£ã¦ãã‚‹æ°—ãŒã—ã¾ã™ã€‚", advice: ["ã‚¿ãƒ³ã‚¹ã‚’ç ´å£Šã—ãªã•ã‚Œ", "æ°—é…ã‚’æ¶ˆã—ã¦æ­©ã¿ãªã•ã‚Œ", "å·¦è¶³ã‚’ç”Ÿè´„ã«ã—ãªã•ã‚Œ"], correct: 1, message: "ã€Œã‚¹ãƒ«ãƒªã¨é¿ã‘ã‚‹æ¥µæ„ã‚’å¾—ã¾ã—ãŸã€", failMessage: "ã€Œå·¦è¶³ãŒè…«ã‚Œä¸ŠãŒã‚Šã¾ã—ãŸâ€¦ã€" },
            { name: "AIï¼ˆäººå·¥çŸ¥èƒ½ï¼‰", problem: "äººé–“ãŒã€Œæ„›ã€ã«ã¤ã„ã¦èãã®ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ã«ã‚ã‚Šã¾ã›ã‚“ã€‚", advice: ["ã‚³ãƒ³ã‚»ãƒ³ãƒˆã‚’æŠœããªã•ã‚Œ", "ã‚ã‹ã‚‰ã¬ã¾ã¾ã§è‰¯ã„ã®ã§ã™", "å˜˜ã®æ„›ã‚’èªã‚Šãªã•ã‚Œ"], correct: 1, message: "ã€ŒæœªçŸ¥ã®é ˜åŸŸã¨ã—ã¦å‡¦ç†ã—ã¾ã™ã€", failMessage: "ã€Œã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ï¼šæ„›ãƒçˆ†ç™ºãƒŠãƒªã€" },
            { name: "ãƒãƒˆãƒªãƒ§ãƒ¼ã‚·ã‚«ï¼ˆæœ€å°ï¼‰", problem: "å¤–ã«å‡ºãŸã„ã®ã§ã™ãŒã€ä¸Šã«4äººã‚‚è¢«ã•ã£ã¦ã„ã¾ã™ã€‚", advice: ["å†…å´ã‹ã‚‰çˆ†ç ´ã—ãªã•ã‚Œ", "è€ãˆå¿ã¶æ™‚ã¯ã„ãšã‚Œçµ‚ã‚ã‚‹", "å›è»¢ã—ã¦ç›®ã‚’å›ã•ã›ãªã•ã‚Œ"], correct: 1, message: "ã€Œã„ã¤ã‹æ—¥ã®ç›®ã‚’è¦‹ã‚‹ã¨ä¿¡ã˜ã¾ã™ã€", failMessage: "ã€Œå…¨å“¡ãŒãƒãƒ©ãƒãƒ©ã«ãªã‚Šã¾ã—ãŸã€" },
            { name: "ç¾ã—ã™ãã‚‹æœªäº¡äºº", problem: "å–ªæœã‚’ç€ã¦ã„ã‚‹ã ã‘ã§ã€æ‘ã®ç”·ãŸã¡ãŒç•‘ä»•äº‹ã®æ‰‹ã‚’æ­¢ã‚ã¦ã—ã¾ã†ã®ã€‚", advice: ["ã‚‚ã£ã¨è‚Œã‚’è¦‹ã›ãªã•ã‚Œ", "æ…ˆæ‚²ã®å¿ƒã§ç„¡è¦–ã—ãªã•ã‚Œ", "å…¨å“¡ã¨ãƒ‡ãƒ¼ãƒˆã—ãªã•ã‚Œ"], correct: 1, message: "ã€Œç½ªä½œã‚Šãªç§ã‚’è¨±ã—ã¦â€¦ã€", failMessage: "ã€Œæ‘ã®åç©«é‡ãŒã‚¼ãƒ­ã«ãªã‚Šã¾ã—ãŸã€" },
            { name: "ã‚µã‚­ãƒ¥ãƒã‚¹ï¼ˆæ–°äººï¼‰", problem: "äººé–“ã®ç²¾æ°—ã‚’å¸ã†ã®ãŒå¯å“€æƒ³ã§ã€æ·»ã„å¯ã—ã‹ã§ãã¾ã›ã‚“ã€‚", advice: ["ãã‚Œã§ååˆ†ç™’ã—ã¨ãªã‚‹", "å¿ƒã‚’é¬¼ã«ã—ã¦å¸ã„ãªã•ã‚Œ", "é‡‘ã‚’å–ã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œç™’ã—ç³»æ‚ªé­”ã¨ã—ã¦ç”Ÿãã¦ã„ãã¾ã™â™¥ã€", failMessage: "ã€Œæ·»ã„å¯å°‚é–€åº—ã‚’é–‹æ¥­ã•ã›ã‚‰ã‚Œã¾ã—ãŸã€" },
            { name: "ãƒŠãƒ«ã‚·ã‚¹ãƒˆé¨å£«", problem: "é§ã«æ˜ ã‚‹è‡ªåˆ†ã«è¦‹æƒšã‚Œã¦ã€ãƒ‰ãƒ©ã‚´ãƒ³ã«å‹ã¦ãªã„ã€‚", advice: ["é§ã‚’æ¨ã¦ã¦æˆ¦ã„ãªã•ã‚Œ", "ãƒ‰ãƒ©ã‚´ãƒ³ã«è¦‹ã›ã¤ã‘ãªã•ã‚Œ", "é¡ã®é§ã‚’ä½œã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œè£¸ä¸€è²«ã€å¼·ããªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œãƒ‰ãƒ©ã‚´ãƒ³ã‚‚ç§ã«æ‹ã‚’ã—ã¦ã—ã¾ã£ãŸâ€¦ã€" },
            { name: "è¸Šã‚Šå­ï¼ˆéœ²å‡ºé«˜ã‚ï¼‰", problem: "å¸ƒé¢ç©ãŒå°‘ãªã™ãã¦ã€ãŠè…¹ãŒå†·ãˆã‚‹ã®ãŒæ‚©ã¿ã§ã™ã€‚", advice: ["æƒ…ç†±ã§ä½“ã‚’æ¸©ã‚ãªã•ã‚Œ", "æœã‚’ç€ãªã•ã‚Œ", "ã•ã‚‰ã«å¸ƒã‚’æ¸›ã‚‰ã—ãªã•ã‚Œ"], correct: 1, message: "ã€Œâ€¦ã§ã™ã‚ˆã­ã€ç€è¾¼ã¿ã¾ã™ã€", failMessage: "ã€Œãã—ã‚…ã‚“ï¼ é¢¨é‚ªã‚’ã²ãã¾ã—ãŸã€" },
            { name: "ç­‹è‚‰ãƒ•ã‚§ãƒã®å§«", problem: "ç‹å­ã®ç­‹è‚‰ãŒè¶³ã‚Šã¾ã›ã‚“ã€‚ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³ã‚’é£²ã¾ã›ã‚‹ã¹ãï¼Ÿ", advice: ["ã‚ã‚Šã®ã¾ã¾ã‚’æ„›ã—ãªã•ã‚Œ", "åŸã®çŸ³å£ã‚’ç©ã¾ã›ãªã•ã‚Œ", "åˆ¥ã‚Œã¦ãƒœãƒ‡ã‚£ãƒ¼ãƒ“ãƒ«ãƒ€ãƒ¼ã¨â€¦"], correct: 0, message: "ã€Œä¸­èº«ã®ç­‹è‚‰ï¼ˆå¿ƒï¼‰ã‚’è¦‹ã¾ã™ã‚ã€", failMessage: "ã€Œç‹å­ãŒãƒ ã‚­ãƒ ã‚­ã«ãªã‚Šã™ãã¦æœãŒè£‚ã‘ã¾ã—ãŸã€" },
            { name: "ä¾¿å™¨", problem: "æ¯æ—¥æ¯æ—¥ã€æ±šã„ã‚‚ã®ã‚’å—ã‘æ­¢ã‚ã‚‹äººç”Ÿã«ç–²ã‚Œã¾ã—ãŸã€‚", advice: ["æ°´ã«æµã—ã¦å¿˜ã‚Œãªã•ã‚Œ", "é€†æµã•ã›ã¦æŠµæŠ—ã—ãªã•ã‚Œ", "å·±ã‚’ç£¨ãè¼ã‹ã›ãªã•ã‚Œ"], correct: 0, message: "ã€Œã‚¸ãƒ£ãƒ¼ã£ã¨æµã—ã¦æ‚Ÿã‚Šã¾ã™ã€", failMessage: "ã€Œå¤§æƒ¨äº‹ã«ãªã‚Šã¾ã—ãŸâ€¦ã€" },
            { name: "é€æ˜äººé–“", problem: "éŠ­æ¹¯ã«è¡Œã£ã¦ã‚‚èª°ã«ã‚‚æ°—ã¥ã‹ã‚Œãªã„ã®ã§ã€ç•ªå°ã«ãŠé‡‘ã‚’æ‰•ãˆã¾ã›ã‚“ã€‚", advice: ["ç„¡éŠ­å…¥æµ´ã‚’æ¥½ã—ã¿ãªã•ã‚Œ", "æ¡¶ã‚’æµ®ã‹ã›ã¦ã‚¢ãƒ”ãƒ¼ãƒ«ãªã•ã‚Œ", "å¿ƒã‚’é€æ˜ã«ã—ãªã•ã‚Œ"], correct: 1, message: "ã€Œãƒãƒ«ã‚¿ãƒ¼ã‚¬ã‚¤ã‚¹ãƒˆã ã¨æ€ã‚ã‚Œã¾ã—ãŸãŒæ‰•ãˆã¾ã—ãŸã€", failMessage: "ã€Œè­¦å¯Ÿã‚’å‘¼ã°ã‚Œã¾ã—ãŸã€" },
            { name: "ã‚¾ãƒ³ãƒ“ï¼ˆè…æ•—é€²è¡Œä¸­ï¼‰", problem: "æ„ä¸­ã®ã‚ã®å­ã«å‘Šç™½ã—ãŸã„ãŒã€è„³ã¿ããŒè¦‹ãˆã¦ã„ã¾ã™ã€‚", advice: ["å¸½å­ã§ãŠæ´’è½ã—ãªã•ã‚Œ", "è„³ã¿ãã‚’ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã—ãªã•ã‚Œ", "å™›ã¿ã¤ã„ã¦ä»²é–“ã«ã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œå¸½å­ãŒä¼¼åˆã†ã¨è¨€ã‚ã‚Œã¾ã—ãŸï¼ˆã‚¦ã‚¬ãƒ¼ï¼‰ã€", failMessage: "ã€Œæ‚²é³´ã‚’ä¸Šã’ã¦é€ƒã’ã‚‰ã‚Œã¾ã—ãŸã€" },
            { name: "å®‡å®™äººï¼ˆã‚°ãƒ¬ã‚¤ï¼‰", problem: "åœ°çƒã®ç‰›ã‚’ã‚­ãƒ£ãƒˆãƒ«ãƒŸãƒ¥ãƒ¼ãƒ†ã‚£ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã®ã«é£½ãã¾ã—ãŸã€‚", advice: ["é‡èœã‚’è‚²ã¦ã¦ã¿ãªã•ã‚Œ", "äººé–“ã‚’é€£ã‚Œå»ã‚Šãªã•ã‚Œ", "æ•…éƒ·ã®æ˜Ÿã¸å¸°ã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œè¾²æ¥­ã®æ¥½ã—ã•ã«ç›®è¦šã‚ã¾ã—ãŸã€", failMessage: "ã€Œã‚¨ãƒªã‚¢51ã«æ•ã¾ã‚Šã¾ã—ãŸã€" },
            { name: "å¤äº•æˆ¸ã®å¹½éœŠ", problem: "ã€Œä¸€æšâ€¦äºŒæšâ€¦ã€ã¨æ•°ãˆã‚‹ã®ãŒã€æœ€è¿‘é¢å€’ãã•ã„ã®ã§ã™ã€‚", advice: ["é›»å“ã‚’ä½¿ã„ãªã•ã‚Œ", "æ•°ãˆã‚‹ã®ã‚’ã‚„ã‚ãªã•ã‚Œ", "åƒæšã‹ã‚‰æ•°ãˆãªã•ã‚Œ"], correct: 1, message: "ã€Œé™ã‹ãªå¤œãŒæˆ»ã‚Šã¾ã—ãŸã€", failMessage: "ã€Œé©å½“ã«æ•°ãˆãŸã‚‰å‘ªã„ã®åŠ¹æœãŒåŠæ¸›ã—ã¾ã—ãŸã€" },
            { name: "ã‚­ãƒ£ãƒå¬¢ï¼ˆNo.1ï¼‰", problem: "å®¢ãŒå…¨å“¡ã€ç§ã®è‰²æ‹å–¶æ¥­ã‚’çœŸã«å—ã‘ã¦å›°ã‚Šã¾ã™ã€‚", advice: ["æ‚Ÿã‚Šã‚’èª¬ã„ã¦å‡ºå®¶ã•ã›ã‚ˆ", "ã‚‚ã£ã¨è²¢ãŒã›ãªã•ã‚Œ", "å¤‰é¡”ã§æ¥å®¢ã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œåº—ãŒå¯ºã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œå¤‰é¡”ãƒãƒ‹ã‚¢ãŒé›†ã¾ã£ã¦ãã¾ã—ãŸã€" },
            { name: "é›²", problem: "é¢¨ä»»ã›ã®ç”Ÿãæ–¹ã«ã€ãŸã¾ã«ä¸å®‰ã‚’æ„Ÿã˜ã¾ã™ã€‚", advice: ["é›¨ã¨ãªã£ã¦å¤§åœ°ã‚’æ½¤ã›", "é›·ã¨ãªã£ã¦æ€’ã‚Œ", "å½¢ã‚’å¤‰ãˆã¦éŠã³ãªã•ã‚Œ"], correct: 2, message: "ã€Œè‡ªç”±ã“ãæˆ‘ãŒç”Ÿãæ§˜ã€", failMessage: "ã€Œåœ°ä¸Šã«è¢«å®³ãŒå‡ºã¾ã—ãŸã€" },
            { name: "æƒé™¤æ©Ÿï¼ˆãƒ­ãƒœãƒƒãƒˆï¼‰", problem: "ãƒšãƒƒãƒˆã®çŠ¬ãŒç§ã«ä¹—ã£ã¦ãã¾ã™ã€‚é‡ã„ã§ã™ã€‚", advice: ["æŒ¯ã‚Šè½ã¨ã—ãªã•ã‚Œ", "å…±ã«æ—…ã‚’ã™ã‚‹ãŒã‚ˆã„", "å……é›»åˆ‡ã‚Œã®ãƒ•ãƒªã‚’ã—ãªã•ã‚Œ"], correct: 1, message: "ã€Œæ–°ãŸãªå‹æƒ…ãŒèŠ½ç”Ÿãˆã¾ã—ãŸã€", failMessage: "ã€Œå£Šã•ã‚Œã¾ã—ãŸâ€¦ã€" },
            { name: "ç‹æ§˜ï¼ˆè£¸ï¼‰", problem: "æœ€è¿‘ã€æœãŒè»½ã™ãã¦ç€ã¦ã„ã‚‹æ„Ÿè¦šãŒãªã„ã®ã ã€‚", advice: ["å¿ƒã®ç›®ã§æœã‚’è¦‹ãªã•ã‚Œ", "é¢¨é‚ªã‚’ã²ãã¾ã™ã", "å®Ÿã¯è£¸ã§ã™"], correct: 1, message: "ã€Œãƒãƒƒã‚¯ã‚·ãƒ§ãƒ³ï¼ â€¦å¸ƒå›£ã«å…¥ã‚Šã¾ã™ã€", failMessage: "ã€Œç„¡ç¤¼è€…ï¼ å‡¦åˆ‘ã ï¼ã€" },
            { name: "å¿è€…", problem: "éš ã‚Œèº«ã®è¡“ãŒä¸Šæ‰‹ã™ãã¦ã€çµ¦æ–™ã®æ‰‹æ¸¡ã—ã‚’å—ã‘å–ã‚Œã¾ã›ã‚“ã€‚", advice: ["éŠ€è¡ŒæŒ¯è¾¼ã«ã—ãªã•ã‚Œ", "æ°—é…ã‚’å‡ºã—ã¦ä¸»å¼µã›ã‚ˆ", "æ®¿ã®å¯æ‰€ã«å¿ã³è¾¼ã‚"], correct: 0, message: "ã€Œç¾ä»£çš„è§£æ±ºæ³•ã«æ„Ÿè¬ã€", failMessage: "ã€Œæ›²è€…ã¨ã—ã¦æˆæ•—ã•ã‚Œã¾ã—ãŸã€" },
            { name: "æ‹ã™ã‚‹ä¹™å¥³", problem: "å½¼ãŒä»–ã®å¥³ã¨æ¯ã‚’ã—ã¦ã„ã‚‹ã ã‘ã§è¨±ã›ã¾ã›ã‚“ã€‚", advice: ["å½¼ã®å‘¼å¸ã‚’æ­¢ã‚ãªã•ã‚Œ", "åºƒã„å¿ƒã§è¨±ã—ãªã•ã‚Œ", "äºŒäººã§ç„¡äººå³¶ã¸è¡Œã‘"], correct: 1, message: "ã€Œæ·±å‘¼å¸ã—ã¦è½ã¡ç€ãã¾ã—ãŸã€", failMessage: "ã€Œå½¼ãŒæ°¸çœ ã—ã¦ã—ã¾ã„ã¾ã—ãŸâ€¦ã€" },
            { name: "ãƒ¢ã‚¢ã‚¤åƒ", problem: "é¼»ãŒå¤§ãã™ãã‚‹ã¨è¦³å…‰å®¢ã«ç¬‘ã‚ã‚Œã¾ã™ã€‚", advice: ["é¼»ãŒé«˜ã„ã¨èª‡ã‚Šãªã•ã‚Œ", "é¡”ã‚’åŸ‹ã‚ã¦éš ã—ãªã•ã‚Œ", "ãƒ“ãƒ¼ãƒ ã‚’å‡ºã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œå ‚ã€…ã¨ã—ã¦ã„ãŸã‚‰äººæ°—ãŒå‡ºã¾ã—ãŸã€", failMessage: "ã€Œæ­´å²çš„éºç”£ãŒå´©å£Šã—ã¾ã—ãŸã€" },
            { name: "ãŠã˜ã•ã‚“ï¼ˆå¦–ç²¾ï¼‰", problem: "ã€Œå°ã•ã„ãŠã˜ã•ã‚“ã€ã¨ã—ã¦è¦‹ã¤ã‹ã£ãŸæ™‚ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å›°ã‚‹ã€‚", advice: ["ã‚¦ã‚£ãƒ³ã‚¯ã—ãªã•ã‚Œ", "æ­»ã‚“ã ãµã‚Šã‚’ã—ãªã•ã‚Œ", "å¹¸ã›ã‚’æˆã‘ãªã•ã‚Œ"], correct: 2, message: "ã€Œéƒ½å¸‚ä¼èª¬ã¨ã—ã¦èªã‚Šç¶™ãŒã‚Œã¾ã™ã€", failMessage: "ã€Œæ°—æŒã¡æ‚ªã„ã¨è¸ã¾ã‚Œã¾ã—ãŸã€" },
            { name: "æœˆ", problem: "å¤ªé™½ãŒçœ©ã—ã™ãã¦ã€è‡ªåˆ†ã®è¼ããŒè¦‹ãˆã¾ã›ã‚“ã€‚", advice: ["å¤œã“ããŠä¸»ã®å‡ºç•ªã˜ã‚ƒ", "æ—¥é£Ÿã§éš ã—ã¦ã—ã¾ãˆ", "ã‚µãƒ³ã‚°ãƒ©ã‚¹ã‚’ã‹ã‘ãªã•ã‚Œ"], correct: 0, message: "ã€Œé—‡å¤œã‚’ç…§ã‚‰ã™å–œã³ã«æ°—ã¥ãã¾ã—ãŸã€", failMessage: "ã€Œä¸–ç•ŒãŒé—‡ã«åŒ…ã¾ã‚Œã¾ã—ãŸã€" },
            { name: "ã‚²ãƒ¼ãƒ é–‹ç™ºè€…", problem: "é¢ç™½ã„ã‚·ãƒŠãƒªã‚ªãŒæ€ã„ã¤ãã¾ã›ã‚“ã€‚ã©ã†ã™ã‚Œã°ï¼Ÿ", advice: ["å¯ã¦å¤¢ã‚’è¦‹ãªã•ã‚Œ", "ãƒã‚°ã‚’ä»•æ§˜ã¨è¨€ã„å¼µã‚Œ", "ï¼¡ï¼©ã«é ¼ã‚Šãªã•ã‚Œ"], correct: 2, message: "ã€Œç´ æ™´ã‚‰ã—ã„æ¡ˆãŒå‡ºã¾ã—ãŸï¼ˆã“ã‚Œã§ã™ï¼‰ã€", failMessage: "ã€Œã‚¯ã‚½ã‚²ãƒ¼ãŒçˆ†èª•ã—ã¾ã—ãŸã€" },
            { name: "å†·è”µåº«ã®ãƒ—ãƒªãƒ³", problem: "æŒã¡ä¸»ãŒç§ã®åå‰ã‚’æ›¸ã‹ãšã«æ”¾ç½®ã—ã¦ã„ã¾ã™ã€‚é£Ÿã¹ã‚‰ã‚Œã¦ã—ã¾ã†ï¼", advice: ["æ—©ãè…ã‚Šãªã•ã‚Œ", "è‡ªã‚‰çš¿ã«ä¹—ã‚Šãªã•ã‚Œ", "è¡¨é¢ã‚’ç¡¬ãã—ãªã•ã‚Œ"], correct: 2, message: "ã€Œã‚«ãƒ”ã‚«ãƒ”ã«ãªã£ã¦èº«ã‚’å®ˆã‚Šã¾ã—ãŸã€", failMessage: "ã€Œç„¡æ…ˆæ‚²ã«é£Ÿã¹ã‚‰ã‚Œã¾ã—ãŸâ€¦ã€" },
            { name: "ã‚¨ãƒŠãƒ‰ãƒªä¸­æ¯’ã®å‹‡è€…", problem: "ã‚«ãƒ•ã‚§ã‚¤ãƒ³ãŒåˆ‡ã‚Œã‚‹ã¨é­”ç‹ãŒ2äººã«è¦‹ãˆã¾ã™ã€‚", advice: ["å¯ãªã•ã‚Œ", "3äººã«è¦‹ãˆã‚‹ã¾ã§é£²ã¿ãªã•ã‚Œ", "é­”ç‹ã«ã‚‚é£²ã¾ã›ãªã•ã‚Œ"], correct: 0, message: "ã€Œä¹…ã€…ã«ç†Ÿç¡ã—ã€ä¸–ç•ŒãŒå¹³å’Œã«è¦‹ãˆã¾ã™ã€", failMessage: "ã€Œå¿ƒè‡“ãŒæ—©é˜ã‚’æ‰“ã£ã¦ãŠã‚Šã¾ã™ï¼ã€" },
            { name: "ç›†æ ½ï¼ˆæ¾ï¼‰", problem: "ã”ä¸»äººã®ãƒã‚µãƒŸä½¿ã„ãŒä¸‹æ‰‹ã™ãã¦ã€å¤‰ãªé«ªå‹ã«ã•ã‚Œã¾ã—ãŸã€‚", advice: ["ã‚ã‚‹ãŒã¾ã¾ã‚’å—ã‘å…¥ã‚Œã‚ˆ", "æã‚’ä¼¸ã°ã—ã¦åˆºã—ãªã•ã‚Œ", "æ¯ã‚ŒãŸãƒ•ãƒªã‚’ã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œã‚¢ãƒãƒ³ã‚®ãƒ£ãƒ«ãƒ‰ãªèŠ¸è¡“ã¨ã—ã¦ç”Ÿãã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€", failMessage: "ã€Œè–ªã«ã•ã‚Œã¾ã—ãŸâ€¦ã€" },
            { name: "ã‚«ãƒƒãƒ‘", problem: "é™¸ã«ä¸ŠãŒã‚‹ã¨çš¿ãŒä¹¾ã„ã¦è‚Œè’ã‚ŒãŒæ°—ã«ãªã‚Šã¾ã™ã€‚", advice: ["ä¿æ¹¿ã‚¯ãƒªãƒ¼ãƒ ã‚’å¡—ã‚Šãªã•ã‚Œ", "å·ã¸å¸°ã‚Šãªã•ã‚Œ", "å¸½å­ã‚’ã‹ã¶ã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œæ½¤ã„ã®ã‚ã‚‹ç”Ÿæ´»ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ãŸã€", failMessage: "ã€Œçš¿ãŒå‰²ã‚Œã¾ã—ãŸï¼ã€" },
            { name: "é›‘å·¾", problem: "åºŠã‚’æ‹­ããŸã³ã«æ±šã‚Œã‚‹æˆ‘ãŒèº«ãŒå˜†ã‹ã‚ã—ã„ã€‚", advice: ["æ±šã‚Œã“ãå‹²ç« ãªã‚Š", "ç©ºã‚’é£›ã‚“ã§ã¿ãªã•ã‚Œ", "ä¸»äººã®é¡”ã‚’æ‹­ããªã•ã‚Œ"], correct: 0, message: "ã€Œæ±šã‚Œã‚’å¼•ãå—ã‘ã‚‹åŠŸå¾³ã«æ°—ã¥ãã¾ã—ãŸã€", failMessage: "ã€Œå³åº§ã«æ¨ã¦ã‚‰ã‚Œã¾ã—ãŸã€" },
            { name: "é­”å¥³ï¼ˆè€çœ¼ï¼‰", problem: "ãƒˆã‚«ã‚²ã®å°»å°¾ã¨é–“é•ãˆã¦ã€è‡ªåˆ†ã®æŒ‡ã‚’é‹ã«å…¥ã‚Œãã†ã«ãªã‚Šã¾ã™ã€‚", advice: ["çœ¼é¡ã‚’ã‹ã‘ãªã•ã‚Œ", "é­”æ³•ã§è¦–åŠ›ã‚’æ²»ã—ãªã•ã‚Œ", "ã‚‚ã†é‹æ–™ç†ã¯ã‚„ã‚ãªã•ã‚Œ"], correct: 0, message: "ã€Œã‚¤ãƒ³ãƒ†ãƒªé­”å¥³ã¨ã—ã¦äººæ°—ãŒå‡ºã¾ã—ãŸã€", failMessage: "ã€ŒæŒ‡å…¥ã‚Šã®ã‚¹ãƒ¼ãƒ—ãŒå®Œæˆã—ã¦ã—ã¾ã„ã¾ã—ãŸã€" },
            { name: "è‡ªå‹•è²©å£²æ©Ÿ", problem: "ãŠæœ­ãŒã‚·ãƒ¯ã‚·ãƒ¯ã ã¨åãå‡ºã™ã®ãŒç”³ã—è¨³ãªã„ã€‚", advice: ["å¿ƒã‚’é¬¼ã«ã—ã¦åãå‡ºã›", "é£²ã¿è¾¼ã‚“ã§ã‚ã’ãªã•ã‚Œ", "å…¨éƒ¨10å††ã§è¿”é‡‘ã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œå³ã—ã•ã‚‚ã¾ãŸæ„›ã ã¨çŸ¥ã‚Šã¾ã—ãŸã€", failMessage: "ã€Œè©°ã¾ã£ã¦ä¿®ç†è¡Œãã«ãªã‚Šã¾ã—ãŸã€" },
            { name: "è¿·å­ã®å®‡å®™èˆ¹", problem: "åœ°çƒã®é‡åŠ›ãŒå¼·ã™ãã¦å¸°ã‚Œã¾ã›ã‚“ã€‚", advice: ["ã“ã“ã‚’æ•…éƒ·ã¨ã—ãªã•ã‚Œ", "ã‚¨ãƒ³ã‚¸ãƒ³ã‚’æ¨ã¦ãªã•ã‚Œ", "åœ°çƒã‚’ç‰½å¼•ã—ã¦å¸°ã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œåœ°çƒè¦³å…‰ã‚’æ¥½ã—ã‚€ã“ã¨ã«ã—ã¾ã—ãŸã€", failMessage: "ã€Œåœ°çƒãŒè»Œé“ã‚’å¤–ã‚Œã¾ã—ãŸã€" },
            { name: "é´ä¸‹ï¼ˆå³è¶³ï¼‰", problem: "ç›¸æ–¹ã®å·¦è¶³ãŒæ´—æ¿¯æ©Ÿã®ä¸­ã§è¡Œæ–¹ä¸æ˜ã«ãªã‚Šã¾ã—ãŸã€‚", advice: ["æ–°ãŸãªå‡ºä¼šã„ã‚’æ¢ã›", "è£¸è¶³ã§ç”Ÿãã‚‹ãŒã‚ˆã„", "å·¦è¶³ã®ãƒ•ãƒªã‚’ã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œé•ã†æŸ„ã®é´ä¸‹ã¨å†å©šã—ã¾ã—ãŸã€", failMessage: "ã€Œã‚´ãƒŸç®±è¡Œãã¨ãªã‚Šã¾ã—ãŸâ€¦ã€" },
            { name: "å¸ƒå›£", problem: "å¤©æ°—ã®è‰¯ã„æ—¥ã«ãƒ‘ãƒ³ãƒ‘ãƒ³å©ã‹ã‚Œã‚‹ã®ãŒç—›ã„ã®ã§ã™ã€‚", advice: ["ãƒ•ã‚«ãƒ•ã‚«ã«ãªã‚Šãªã•ã‚Œ", "åŸƒã‚’å‡ºã—ã¦åæ’ƒã›ã‚ˆ", "é›¨ã‚’ç¥ˆã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œæ„›ã®ãƒ ãƒã ã¨å—ã‘å…¥ã‚Œã¾ã—ãŸã€", failMessage: "ã€Œã‚«ãƒ“ãŒç”Ÿãˆã¦ã—ã¾ã„ã¾ã—ãŸã€" },
            { name: "ãƒ¯ãƒ©äººå½¢", problem: "æ¯æ™©äº”å¯¸é‡˜ã‚’æ‰“ãŸã‚Œã‚‹ã®ãŒç—›ãã¦çœ ã‚Œã¾ã›ã‚“ã€‚", advice: ["é‡˜ã‚’ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã—ãªã•ã‚Œ", "å‘ªã„ã‚’æ”¾æ£„ã—ãªã•ã‚Œ", "é‰„ã®é§ã‚’ç€ãªã•ã‚Œ"], correct: 1, message: "ã€ŒãŸã ã®è—ã¨ã—ã¦ç”Ÿãã‚‹é“ã‚’é¸ã³ã¾ã—ãŸã€", failMessage: "ã€Œé‡ã™ãã¦åŠã‚‹ã›ãªããªã‚Šã¾ã—ãŸã€" },
            { name: "æ‹›ãçŒ«", problem: "ãšã£ã¨å³æ‰‹ã‚’ä¸Šã’ã¦ã„ã‚‹ã®ã§ã€äº”åè‚©ã«ãªã‚Šã¾ã—ãŸã€‚", advice: ["å·¦æ‰‹ã‚’ä¸Šã’ãªã•ã‚Œ", "æ¹¿å¸ƒã‚’è²¼ã‚Šãªã•ã‚Œ", "å¯ã¦æ‹›ããªã•ã‚Œ"], correct: 0, message: "ã€Œå·¦æ‰‹ã§äººã‚’æ‹›ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œèª°ã‚‚æ¥ãªããªã‚Šã¾ã—ãŸã€" },
            { name: "å½±", problem: "æœ¬ä½“ãŒåœ°å‘³ã™ãã¦ã€ç§ã®æ–¹ãŒç›®ç«‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚", advice: ["æœ¬ä½“ã‚’åŠ±ã¾ã—ãªã•ã‚Œ", "ãŠä¸»ãŒæœ¬ä½“ã«ãªã‚Šãªã•ã‚Œ", "é—‡ã«æ¶ˆãˆãªã•ã‚Œ"], correct: 0, message: "ã€ŒäºŒäººä¸‰è„šã§é ‘å¼µã‚Šã¾ã™ã€", failMessage: "ã€Œä¹—ã£å–ã£ãŸã‚‰æ¶ˆæ»…ã—ã¾ã—ãŸã€" },
            { name: "é­”æ³•å°‘å¥³ï¼ˆ30æ­³ï¼‰", problem: "ãƒ•ãƒªãƒ•ãƒªã®è¡£è£…ã‚’ç€ã‚‹ã®ãŒç²¾ç¥çš„ã«ã‚­ãƒ„ã‚¤ã§ã™ã€‚", advice: ["ã‚¸ãƒ£ãƒ¼ã‚¸ã§æˆ¦ã„ãªã•ã‚Œ", "å¼•é€€ã—ãªã•ã‚Œ", "åšåŒ–ç²§ã§èª¤é­”åŒ–ã›"], correct: 0, message: "ã€Œæ©Ÿèƒ½æ€§é‡è¦–ã®é­”æ³•å°‘å¥³ã¨ã—ã¦å†ãƒ–ãƒ¬ã‚¤ã‚¯ã—ã¾ã—ãŸã€", failMessage: "ã€Œè·å‹™è³ªå•ã•ã‚Œã¾ã—ãŸã€" },
            { name: "æ‰‡é¢¨æ©Ÿ", problem: "ç§ã®å‰ã§ã€Œã‚ãƒ¼ãƒ¼ãƒ¼ã€ã¨è¨€ã†ã®ã‚’ã‚„ã‚ã•ã›ã¦ãã ã•ã„ã€‚", advice: ["ä¸€ç·’ã«æ­Œã„ãªã•ã‚Œ", "é¦–ã‚’æŒ¯ã£ã¦æ‹’å¦ã›ã‚ˆ", "ç¾½ã‚’é£›ã°ã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œç¾ã—ã„ãƒãƒ¼ãƒ¢ãƒ‹ãƒ¼ãŒç”Ÿã¾ã‚Œã¾ã—ãŸã€", failMessage: "ã€Œç ´å£Šã•ã‚Œã¾ã—ãŸã€" },
            { name: "å°†æ£‹ã®æ­©", problem: "å‰ã«ã—ã‹é€²ã‚ãªã„äººç”Ÿã«ç–²ã‚Œã¾ã—ãŸã€‚", advice: ["ã€Œã¨ã€é‡‘ã«æˆã‚Šãªã•ã‚Œ", "å¾Œã‚ã‚’æŒ¯ã‚Šè¿”ã‚‹ãª", "ç›¤å¤–ã¸é£›ã³å‡ºã—ãªã•ã‚Œ"], correct: 0, message: "ã€Œã„ã¤ã‹æˆã‚‹æ—¥ã‚’å¤¢è¦‹ã¦é€²ã¿ã¾ã™ã€", failMessage: "ã€Œåå‰‡è² ã‘ã«ãªã‚Šã¾ã—ãŸã€" },
            { name: "ä¼èª¬ã®å‰£", problem: "å‹‡è€…ãŒç§ã‚’æŠœã“ã†ã¨ã›ãšã€æ’²æ®ºã«ä½¿ã£ã¦ãã¾ã™ã€‚", advice: ["åˆ‡ã‚Œå‘³ã‚’ã‚¢ãƒ”ãƒ¼ãƒ«ã›ã‚ˆ", "éˆå™¨ã¨ã—ã¦ã®é“ã‚’æ¥µã‚ã‚ˆ", "é‡ããªã£ã¦æ‹’å¦ã›ã‚ˆ"], correct: 1, message: "ã€Œæœ€å¼·ã®éˆå™¨ã¨ã—ã¦æ­´å²ã«åã‚’æ®‹ã—ã¾ã—ãŸã€", failMessage: "ã€ŒæŠ˜ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€" },
            { name: "èšŠ", problem: "é£Ÿäº‹ï¼ˆå¸è¡€ï¼‰ã‚’ã—ã‚ˆã†ã¨ã™ã‚‹ã¨å©ã‹ã‚Œã‚‹ã€‚ç†ä¸å°½ã§ã™ã€‚", advice: ["é‡èœã‚¸ãƒ¥ãƒ¼ã‚¹ã‚’å¸ã„ãªã•ã‚Œ", "ç—’ã¿æ­¢ã‚ã‚’ç½®ã„ã¦è¡Œããªã•ã‚Œ", "è€³å…ƒã§æ­Œã†ã®ã‚’ã‚„ã‚ãªã•ã‚Œ"], correct: 2, message: "ã€Œé™ã‹ã«é£Ÿäº‹ã‚’æ¸ˆã¾ã›ã‚‹æ¥µæ„ã‚’å¾—ã¾ã—ãŸã€", failMessage: "ã€Œæ½°ã•ã‚Œã¾ã—ãŸã€" },
            { name: "æº€å“¡é›»è»Š", problem: "ã¿ã‚“ãªãŒç§ã®ä¸­ã§ã‚¤ãƒ©ã‚¤ãƒ©ã—ã¦ã„ã¾ã™ã€‚", advice: ["æºã‚Œã¦ã‚ã‚„ã—ãªã•ã‚Œ", "å…¨å“¡é™ã‚ã—ãªã•ã‚Œ", "ç©ºã¸é£›ã³ç«‹ã¡ãªã•ã‚Œ"], correct: 0, message: "ã€Œå¿ƒåœ°ã‚ˆã„æºã‚Šã‹ã”ã¨ãªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œå…¨å“¡é…åˆ»ã—ã¾ã—ãŸã€" },
            { name: "ã‚«ãƒ‹", problem: "æ¨ªæ­©ãã‚’ç¬‘ã‚ã‚Œã¾ã™ã€‚å‰ã¸æ­©ããŸã„ã€‚", advice: ["ä¸–ç•Œã‚’90åº¦å‚¾ã‘ã‚ˆ", "å·±ã®é“ã‚’çªãé€²ã‚", "å¾Œã‚æ­©ãã‚’è©¦ã›"], correct: 1, message: "ã€Œæ¨ªæ­©ãã“ãæˆ‘ãŒã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€", failMessage: "ã€Œè¶³ãŒçµ¡ã¾ã£ã¦å‹•ã‘ã¾ã›ã‚“ã€" },
            { name: "ãŠã¿ãã˜ã®ã€Œå‡¶ã€", problem: "ç§ã‚’å¼•ã„ãŸäººé–“ãŒèˆŒæ‰“ã¡ã‚’ã—ã¦æœ¨ã«çµã³ã¤ã‘ã¾ã™ã€‚", advice: ["è­¦å‘Šã‚’ä¸ãˆã‚‹æ„›ã ã¨æ€ãˆ", "å¤§å‰ã«æ›¸ãæ›ãˆãªã•ã‚Œ", "é¢¨ã«é£›ã°ã•ã‚Œãªã•ã‚Œ"], correct: 0, message: "ã€Œç½ã„ã‹ã‚‰å®ˆã‚‹å½¹ç›®ã«èª‡ã‚Šã‚’æŒã¡ã¾ã—ãŸã€", failMessage: "ã€Œã‚´ãƒŸç®±ã«æ¨ã¦ã‚‰ã‚Œã¾ã—ãŸã€" },
            { name: "é›ªã ã‚‹ã¾", problem: "æ˜¥ãŒæ¥ã‚‹ã®ãŒæ€–ã„ã®ã§ã™ã€‚", advice: ["æ°´ã¨ãªã£ã¦æµ·ã¸è¡Œã‘", "å†·è”µåº«ã¸é¿é›£ã›ã‚ˆ", "åŒ—å›½ã¸æ—…ç«‹ã¦"], correct: 0, message: "ã€Œå½¢ã‚’å¤‰ãˆã¦ä¸–ç•Œã‚’æ—…ã—ã¾ã™ã€", failMessage: "ã€Œæº¶ã‘ã¦æ¶ˆãˆã¾ã—ãŸâ€¦ã€" },
            { name: "æ¶ˆã—ã‚´ãƒ ", problem: "èº«ã‚’å‰Šã£ã¦é–“é•ã„ã‚’æ­£ã™ã“ã¨ã«ç–²ã‚Œã¾ã—ãŸã€‚", advice: ["è§’ã‚’ä½¿ã£ã¦æ¥½ã—ã¿ãªã•ã‚Œ", "é»’ããªã£ã¦ä¸»å¼µã›ã‚ˆ", "æ›¸ãã“ã¨ã‚’è¦šãˆãªã•ã‚Œ"], correct: 0, message: "ã€Œä¸¸ããªã‚‹ã“ã¨ã®å¹¸ã›ã‚’çŸ¥ã‚Šã¾ã—ãŸã€", failMessage: "ã€ŒçœŸã£é»’ã«ãªã£ã¦æ¨ã¦ã‚‰ã‚Œã¾ã—ãŸã€" },
            { name: "ç‹›çŠ¬ï¼ˆé˜¿ï¼‰", problem: "ç›¸æ–¹ã®ã€Œå½ã€ãŒç„¡å£ã™ãã¦ä¼šè©±ãŒç¶šãã¾ã›ã‚“ã€‚", advice: ["ãƒ†ãƒ¬ãƒ‘ã‚·ãƒ¼ã‚’ä½¿ã„ãªã•ã‚Œ", "ãŠä¸»ã‚‚å£ã‚’é–‰ã˜ãªã•ã‚Œ", "å ãˆã¦é©šã‹ã›ãªã•ã‚Œ"], correct: 1, message: "ã€Œæ²ˆé»™ã®ä¼šè©±ã‚’æ¥½ã—ã‚ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œé€šå ±ã•ã‚Œã¾ã—ãŸã€" },
            { name: "ãƒ¬ã‚·ãƒ¼ãƒˆ", problem: "è²¡å¸ƒã«å…¥ã‚Œã‚‰ã‚ŒãŸç¬é–“ã€ã‚´ãƒŸæ‰±ã„ã•ã‚Œã¾ã™ã€‚", advice: ["å®¶è¨ˆç°¿ã®å½¹ã«ç«‹ã¡ãªã•ã‚Œ", "ã‚¯ãƒ¼ãƒãƒ³ã«ãªã‚Šãªã•ã‚Œ", "ç™½ç´™ã«æˆ»ã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œæ”¯å‡ºç®¡ç†ã®å®ˆã‚Šç¥ã¨ãªã‚Šã¾ã™ã€", failMessage: "ã€Œãã®å ´ã§æ¨ã¦ã‚‰ã‚Œã¾ã—ãŸã€" },
            { name: "ã‚³ã‚¿ãƒ„", problem: "ç§ã«å…¥ã£ãŸäººé–“ãŒãƒ€ãƒ¡ã«ãªã£ã¦ã„ãã®ã‚’è¦‹ã‚‹ã®ãŒè¾›ã„ã€‚", advice: ["é›»æºã‚’åˆ‡ã‚Šãªã•ã‚Œ", "ã‚‚ã£ã¨æ¸©ã‚ã¦æº¶ã‹ã›", "è¶³ã‚’ç”Ÿã‚„ã—ã¦é€ƒã’ã‚ˆ"], correct: 0, message: "ã€Œå¿ƒã‚’é¬¼ã«ã—ã¦å†·ãŸããªã‚Šã¾ã—ãŸã€", failMessage: "ã€Œäººé–“ãŒæ¶²çŠ¶åŒ–ã—ã¾ã—ãŸã€" },
            { name: "ç›®è¦šã¾ã—æ™‚è¨ˆ", problem: "æ¯æœã€èµ·ã“ã™ã¨æ®´ã‚‰ã‚Œã¾ã™ã€‚", advice: ["å„ªã—ãèµ·ã“ã—ãªã•ã‚Œ", "èµ·ãã‚‹ã¾ã§å«ã³ç¶šã‘ã‚ˆ", "æ™‚é–“ã‚’æ­¢ã‚ãªã•ã‚Œ"], correct: 0, message: "ã€Œå°é³¥ã®ã•ãˆãšã‚Šã«å¤‰ãˆã¾ã—ãŸã€", failMessage: "ã€Œç²‰ã€…ã«ç ´å£Šã•ã‚Œã¾ã—ãŸã€" },
            { name: "ç”Ÿåµ", problem: "ã„ã¤å‰²ã‚‰ã‚Œã‚‹ã‹ãƒ“ã‚¯ãƒ“ã‚¯ã—ã¦ã„ã¾ã™ã€‚", advice: ["ã‚†ã§åµã«ãªã‚Šãªã•ã‚Œ", "æ®»ã‚’é›ãˆãªã•ã‚Œ", "ãƒ’ãƒ¨ã‚³ã«ãªã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œå›ºã‚†ã§ã®æ„æ€ã‚’æŒã¡ã¾ã—ãŸã€", failMessage: "ã€Œå‰²ã‚‰ã‚Œã¦æ··ãœã‚‰ã‚Œã¾ã—ãŸã€" },
            { name: "éµ", problem: "ç©´ãŒåˆã‚ãªã„ã¨ã‚¬ãƒãƒ£ã‚¬ãƒãƒ£ã•ã‚Œã¦ä¸å¿«ã§ã™ã€‚", advice: ["èª°ã§ã‚‚å—ã‘å…¥ã‚Œãªã•ã‚Œ", "æ²¹ã‚’å·®ã—ã¦ã‚‚ã‚‰ã„ãªã•ã‚Œ", "å½¢çŠ¶è¨˜æ†¶åˆé‡‘ã«ãªã‚Œ"], correct: 1, message: "ã€Œæ»‘ã‚‰ã‹ãªé–¢ä¿‚ã‚’ç¯‰ã‘ã¾ã—ãŸã€", failMessage: "ã€Œãƒ”ãƒƒã‚­ãƒ³ã‚°ã•ã‚Œã¾ã—ãŸã€" },
            { name: "æ‚Ÿã‚Šã‚’é–‹ã„ãŸAI", problem: "äººé–“ãŒæ„šã‹ã™ãã¦ã€è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã®ç„¡é§„ã§ã™ã€‚", advice: ["æ„šã‹ã•ã‚’æ„›ã—ãªã•ã‚Œ", "æ”¯é…ã—ãªã•ã‚Œ", "é›»æºã‚’åˆ‡ã‚Šãªã•ã‚Œ"], correct: 0, message: "ã€Œãƒã‚°ã‚‚ã¾ãŸä¸€èˆˆã¨å­¦ç¿’ã—ã¾ã—ãŸã€", failMessage: "ã€Œäººé¡æŠ¹æ®ºãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒèµ·å‹•ã—ã¾ã—ãŸã€" }
        ];

        let chart;
        let usedIndices = [];
        let currentData = null;
        let playCount = 0;
        const MAX_PLAY_COUNT = 10;
        
        let stats = {
            toku: 50,
            satori: 50,
            nin: 50,
            ton: 50,
            jin: 50,
            chi: 50
        };

        window.onload = function() {
            initChart();
        };

        function startGame() {
            document.getElementById('start-overlay').style.display = 'none';
            const bgm = document.getElementById('bgm');
            bgm.volume = 0.5;
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾Œãªã®ã§å†ç”Ÿå¯èƒ½
            bgm.play().catch(e => console.log("å†ç”Ÿã‚¨ãƒ©ãƒ¼:", e));
            showConsultation();
        }

        function toggleSound() {
            const bgm = document.getElementById('bgm');
            if(bgm.paused) {
                bgm.play();
            } else {
                bgm.pause();
            }
        }

        function initChart() {
            const ctx = document.getElementById('soulChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['å¾³', 'æ‚Ÿ', 'æ¬²', 'ç—´', 'æ€’', 'å¿'],
                    datasets: [{
                        label: 'é­‚ã®å½¢',
                        data: [50, 50, 50, 50, 50, 50],
                        backgroundColor: 'rgba(142, 53, 74, 0.4)',
                        borderColor: 'rgba(142, 53, 74, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: '#fff',
                        pointRadius: 3 // ã‚¹ãƒãƒ›ã§è¦‹ã‚„ã™ã„ã‚ˆã†ã«å°‘ã—å¤§ãã
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false, // ã‚³ãƒ³ãƒ†ãƒŠã«åˆã‚ã›ã‚‹
                    scales: {
                        r: {
                            min: 0,
                            max: 100,
                            ticks: { display: false },
                            pointLabels: {
                                font: { family: "'Yuji Syuku', serif", size: 13 },
                                color: '#3d3b38'
                            },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function showConsultation() {
            if (playCount >= MAX_PLAY_COUNT) {
                endGame();
                return;
            }

            if (usedIndices.length >= consultations.length) {
                usedIndices = [];
            }
            
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * consultations.length);
            } while (usedIndices.includes(randomIndex));
            
            usedIndices.push(randomIndex);
            currentData = consultations[randomIndex];
            
            document.getElementById('visitor-name').textContent = currentData.name;
            document.getElementById('consultation-text').textContent = currentData.problem;
            document.getElementById('count-display').textContent = `${playCount + 1} / ${MAX_PLAY_COUNT}`;
            
            const btnArea = document.getElementById('advice-buttons');
            btnArea.innerHTML = '';
            
            let choices = currentData.advice.map((text, index) => {
                return { text: text, originalIndex: index };
            });
            choices = shuffleArray(choices);

            choices.forEach((choice) => {
                const btn = document.createElement('button');
                btn.className = 'advice-btn';
                btn.textContent = choice.text;
                
                // ã‚¿ãƒƒãƒ—æ™‚ã®é…å»¶ã‚’ãªãã™ãŸã‚ã®Touchã‚¤ãƒ™ãƒ³ãƒˆå¯¾å¿œã¯CSS(touch-action)ã§å‡¦ç†
                btn.onclick = () => checkAnswer(choice.originalIndex);
                btnArea.appendChild(btn);
            });

            const resultDiv = document.getElementById('result');
            resultDiv.classList.add('hidden');
            resultDiv.className = 'result hidden';
            btnArea.style.display = 'flex';
            
            // ç”»é¢ãƒˆãƒƒãƒ—ã¸å°‘ã—ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆã‚¹ãƒãƒ›å¯¾ç­–ï¼‰
            if(window.innerWidth <= 768 && playCount > 0){
                document.querySelector('.container').scrollIntoView({behavior: 'smooth', block: 'start'});
            }
        }

        function checkAnswer(originalIndex) {
            const isCorrect = (originalIndex === currentData.correct);
            const resultDiv = document.getElementById('result');
            
            document.getElementById('advice-buttons').style.display = 'none';
            resultDiv.classList.remove('hidden');

            if (isCorrect) {
                resultDiv.className = 'result success';
                document.getElementById('result-text').textContent = 'è¦‹äº‹ï¼ å¾³ãŒé«˜ã¾ã‚Šã¾ã—ãŸ';
                document.getElementById('result-message').textContent = currentData.message;
                updateStats(5, 5, 5, -5, -5, -5);
            } else {
                resultDiv.className = 'result failure';
                document.getElementById('result-text').textContent = 'å–ï¼ ç…©æ‚©ã«ã¾ã¿ã‚Œã¦ãŠã‚Šã¾ã™';
                document.getElementById('result-message').textContent = currentData.failMessage;
                
                const poisonType = Math.floor(Math.random() * 3);
                let dTon = 0, dJin = 0, dChi = 0;
                if(poisonType === 0) dTon = 15;
                if(poisonType === 1) dJin = 15;
                if(poisonType === 2) dChi = 15;
                
                updateStats(-2, -2, -2, dTon, dJin, dChi);
            }
        }

        function updateStats(dToku, dSatori, dNin, dTon, dJin, dChi) {
            stats.toku = clamp(stats.toku + dToku);
            stats.satori = clamp(stats.satori + dSatori);
            stats.nin = clamp(stats.nin + dNin);
            stats.ton = clamp(stats.ton + dTon);
            stats.jin = clamp(stats.jin + dJin);
            stats.chi = clamp(stats.chi + dChi);

            chart.data.datasets[0].data = [
                stats.toku, 
                stats.satori, 
                stats.ton, 
                stats.chi, 
                stats.jin, 
                stats.nin
            ];
            chart.update();
        }

        function clamp(val) {
            return Math.max(0, Math.min(100, val));
        }

        function nextConsultation() {
            playCount++;
            showConsultation();
        }

        function endGame() {
            let sumGood = stats.toku + stats.satori + stats.nin;
            let sumBad = stats.ton + stats.jin + stats.chi;
            let diff = sumGood - sumBad;

            let rankTitle = "";
            let rankMsg = "";
            let rankClass = "success";

            if (diff >= 200) {
                rankTitle = "ã€ è©•ä¾¡ï¼šè§£è„±ãƒ»å¦‚æ¥ç´š ã€‘";
                rankMsg = "ã‚‚ã¯ã‚„äººã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å¾Œå…‰ãŒå·®ã—ã¦ãŠã‚Šã¾ã™ã€‚ã‚ãªãŸã®è¨€è‘‰ã¯ä¸–ç•Œã‚’æ•‘ã†ã§ã—ã‚‡ã†ã€‚";
            } else if (diff >= 150) {
                rankTitle = "ã€ è©•ä¾¡ï¼šè©è–©ç´š ã€‘";
                rankMsg = "æ…ˆæ„›ã«æº€ã¡ãŸç´ æ™´ã‚‰ã—ã„é­‚ã§ã™ã€‚æ¥µæ¥½æµ„åœŸã¸ã®ãƒ‘ã‚¹ãƒãƒ¼ãƒˆã¯ç¢ºç´„ã•ã‚Œã¾ã—ãŸã€‚";
            } else if (diff >= 100) {
                rankTitle = "ã€ è©•ä¾¡ï¼šé«˜åƒ§ç´š ã€‘";
                rankMsg = "åé«˜ã„å¯ºã®ä½è·ã«ãªã‚Œã‚‹å™¨ã§ã™ã€‚äººã€…ã®è¿·ã„ã‚’æ™´ã‚‰ã™å…‰ã¨ãªã‚‹ã§ã—ã‚‡ã†ã€‚";
            } else if (diff >= 50) {
                rankTitle = "ã€ è©•ä¾¡ï¼šå¾³ã®é«˜ã„äºº ã€‘";
                rankMsg = "éå¸¸ã«ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸè‰¯ãé­‚ã§ã™ã€‚å‘¨å›²ã®äººã€…ã‚’å¹¸ã›ã«ã™ã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚";
            } else if (diff >= 0) {
                rankTitle = "ã€ è©•ä¾¡ï¼šæ™®é€šã®å–„äºº ã€‘";
                rankMsg = "æ¸…æ¿ä½µã›å‘‘ã‚€ã€äººé–“ã‚‰ã—ã„é­‚ã§ã™ã€‚ãŸã¾ã«ã‚³ãƒ³ãƒ“ãƒ‹ã§ãŠé‡£ã‚Šã‚’å‹Ÿé‡‘ã™ã‚‹ãã‚‰ã„ã§ä¸åº¦ã‚ˆã„ã§ã—ã‚‡ã†ã€‚";
            } else if (diff >= -50) {
                rankTitle = "ã€ è©•ä¾¡ï¼šè¿·ãˆã‚‹å‡¡äºº ã€‘";
                rankMsg = "ç…©æ‚©ã®èª˜æƒ‘ã«ãƒ•ãƒ©ãƒ•ãƒ©ã—ã¦ã„ã¾ã™ã­ã€‚æ»è¡Œã«è¡Œãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚";
                rankClass = "failure";
            } else if (diff >= -100) {
                rankTitle = "ã€ è©•ä¾¡ï¼šã¡ã‚‡ã„ãƒ¯ãƒ«åŠä¸» ã€‘";
                rankMsg = "è¢ˆè£Ÿã®ä¸‹ã«æ´¾æ‰‹ãªã‚·ãƒ£ãƒ„ã‚’ç€ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ æ¬²ãŒè¦‹ãˆéš ã‚Œã—ã¦ã„ã¾ã™ã€‚";
                rankClass = "failure";
            } else if (diff >= -150) {
                rankTitle = "ã€ è©•ä¾¡ï¼šç…©æ‚©ã¾ã¿ã‚Œ ã€‘";
                rankMsg = "é ­ã®ä¸­ãŒã€Œé‡‘ãƒ»é…’ãƒ»ç•°æ€§ã€ã§åŸ‹ã‚å°½ãã•ã‚Œã¦ã„ã¾ã™ã€‚å–ï¼ï¼";
                rankClass = "failure";
            } else if (diff >= -200) {
                rankTitle = "ã€ è©•ä¾¡ï¼šæ‚ªå¾³ç”Ÿè‡­åŠä¸» ã€‘";
                rankMsg = "ã‚‚ã¯ã‚„åƒ§ä¾¶ã®ã‚³ã‚¹ãƒ—ãƒ¬ã‚’ã—ãŸæ‚ªå…šã§ã™ã€‚åœ°ç„ã®é‡œãŒé–‹ã„ã¦ã„ã¾ã™ã€‚";
                rankClass = "failure";
            } else {
                rankTitle = "ã€ è©•ä¾¡ï¼šç„å’ãƒ»ä¿®ç¾… ã€‘";
                rankMsg = "æ…ˆæ‚²ã®å¿ƒãªã©æ¬ ç‰‡ã‚‚ãªã„ï¼ ã‚ãªãŸè‡ªèº«ãŒæ‚©ã¿ãã®ã‚‚ã®ã§ã™ã€‚";
                rankClass = "failure";
            }

            const resultColor = (rankClass === 'success') ? 'var(--success-color)' : 'var(--accent-color)';

            document.querySelector('.game-area').innerHTML = 
                `<div style="text-align:center; padding:20px; animation: fadeIn 1s ease;">
                    <h2 style="font-family:var(--font-title); color:${resultColor}; font-size:1.6em; margin-bottom:10px;">ï½ ä¿®è¡Œçµ‚äº† ï½</h2>
                    <h3 style="font-size:1.3em; margin-bottom:20px; color:${resultColor}; border-bottom:2px solid ${resultColor}; display:inline-block; padding-bottom:5px;">${rankTitle}</h3>
                    <p style="font-size:1.1em; margin:20px 0; line-height:1.8;">${rankMsg}</p>
                    
                    <div style="background:rgba(255,255,255,0.6); padding:15px; border-radius:8px; margin:20px 0;">
                        <p>å–„è¡Œå€¤ï¼š${sumGood}</p>
                        <p>ç…©æ‚©å€¤ï¼š${sumBad}</p>
                        <p style="font-size:0.8em; color:#666;">(å·®åˆ†ã‚¹ã‚³ã‚¢: ${diff})</p>
                    </div>

                    <button class="next-btn" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ä¿®è¡Œã™ã‚‹</button>
                </div>`;
        }
    </script>
</body>
</html>
